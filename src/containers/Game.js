/* eslint-disable react/no-array-index-key */
/* eslint-disable react/sort-comp */
/* eslint-disable no-shadow */
/* eslint-disable class-methods-use-this */

import { connect } from 'react-redux';
import { Link, withRouter } from 'react-router-dom';

import React from 'react';
import Board from '../components/Board';

import {
  playerMove,
  timeTravel,
  sortHistory,
  newGame
} from '../acctions/gameAction';
import { getBestMove, aiMove } from '../acctions/aiAction';

function indicateVictory(squares) {
  const possibleStreaks = [
    [0, 1, 2, 3, 4],
    [1, 2, 3, 4, 5],
    [2, 3, 4, 5, 6],
    [3, 4, 5, 6, 7],
    [4, 5, 6, 7, 8],
    [5, 6, 7, 8, 9],
    [6, 7, 8, 9, 10],
    [7, 8, 9, 10, 11],
    [8, 9, 10, 11, 12],
    [9, 10, 11, 12, 13],
    [10, 11, 12, 13, 14],
    [11, 12, 13, 14, 15],
    [12, 13, 14, 15, 16],
    [13, 14, 15, 16, 17],
    [14, 15, 16, 17, 18],
    [15, 16, 17, 18, 19],

    [20, 21, 22, 23, 24],
    [21, 22, 23, 24, 25],
    [22, 23, 24, 25, 26],
    [23, 24, 25, 26, 27],
    [24, 25, 26, 27, 28],
    [25, 26, 27, 28, 29],
    [26, 27, 28, 29, 30],
    [27, 28, 29, 30, 31],
    [28, 29, 30, 31, 32],
    [29, 30, 31, 32, 33],
    [30, 31, 32, 33, 34],
    [31, 32, 33, 34, 35],
    [32, 33, 34, 35, 36],
    [33, 34, 35, 36, 37],
    [34, 35, 36, 37, 38],
    [35, 36, 37, 38, 39],

    [40, 41, 42, 43, 44],
    [41, 42, 43, 44, 45],
    [42, 43, 44, 45, 46],
    [43, 44, 45, 46, 47],
    [44, 45, 46, 47, 48],
    [45, 46, 47, 48, 49],
    [46, 47, 48, 49, 50],
    [47, 48, 49, 50, 51],
    [48, 49, 50, 51, 52],
    [49, 50, 51, 52, 53],
    [50, 51, 52, 53, 54],
    [51, 52, 53, 54, 55],
    [52, 53, 54, 55, 56],
    [53, 54, 55, 56, 57],
    [54, 55, 56, 57, 58],
    [55, 56, 57, 58, 59],

    [60, 61, 62, 63, 64],
    [61, 62, 63, 64, 65],
    [62, 63, 64, 65, 66],
    [63, 64, 65, 66, 67],
    [64, 65, 66, 67, 68],
    [65, 66, 67, 68, 69],
    [66, 67, 68, 69, 70],
    [67, 68, 69, 70, 71],
    [68, 69, 70, 71, 72],
    [69, 70, 71, 72, 73],
    [70, 71, 72, 73, 74],
    [71, 72, 73, 74, 75],
    [72, 73, 74, 75, 76],
    [73, 74, 75, 76, 77],
    [74, 75, 76, 77, 78],
    [75, 76, 77, 78, 79],

    [80, 81, 82, 83, 84],
    [81, 82, 83, 84, 85],
    [82, 83, 84, 85, 86],
    [83, 84, 85, 86, 87],
    [84, 85, 86, 87, 88],
    [85, 86, 87, 88, 89],
    [86, 87, 88, 89, 90],
    [87, 88, 89, 90, 91],
    [88, 89, 90, 91, 92],
    [89, 90, 91, 92, 93],
    [90, 91, 92, 93, 94],
    [91, 92, 93, 94, 95],
    [92, 93, 94, 95, 96],
    [93, 94, 95, 96, 97],
    [94, 95, 96, 97, 98],
    [95, 96, 97, 98, 99],

    [100, 101, 102, 103, 104],
    [101, 102, 103, 104, 105],
    [102, 103, 104, 105, 106],
    [103, 104, 105, 106, 107],
    [104, 105, 106, 107, 108],
    [105, 106, 107, 108, 109],
    [106, 107, 108, 109, 110],
    [107, 108, 109, 110, 111],
    [108, 109, 110, 111, 112],
    [109, 110, 111, 112, 113],
    [110, 111, 112, 113, 114],
    [111, 112, 113, 114, 115],
    [112, 113, 114, 115, 116],
    [113, 114, 115, 116, 117],
    [114, 115, 116, 117, 118],
    [115, 116, 117, 118, 119],

    [120, 121, 122, 123, 124],
    [121, 122, 123, 124, 125],
    [122, 123, 124, 125, 126],
    [123, 124, 125, 126, 127],
    [124, 125, 126, 127, 128],
    [125, 126, 127, 128, 129],
    [126, 127, 128, 129, 130],
    [127, 128, 129, 130, 131],
    [128, 129, 130, 131, 132],
    [129, 130, 131, 132, 133],
    [130, 131, 132, 133, 134],
    [131, 132, 133, 134, 135],
    [132, 133, 134, 135, 136],
    [133, 134, 135, 136, 137],
    [134, 135, 136, 137, 138],
    [135, 136, 137, 138, 139],

    [140, 141, 142, 143, 144],
    [141, 142, 143, 144, 145],
    [142, 143, 144, 145, 146],
    [143, 144, 145, 146, 147],
    [144, 145, 146, 147, 148],
    [145, 146, 147, 148, 149],
    [146, 147, 148, 149, 150],
    [147, 148, 149, 150, 151],
    [148, 149, 150, 151, 152],
    [149, 150, 151, 152, 153],
    [150, 151, 152, 153, 154],
    [151, 152, 153, 154, 155],
    [152, 153, 154, 155, 156],
    [153, 154, 155, 156, 157],
    [154, 155, 156, 157, 158],
    [155, 156, 157, 158, 159],

    [160, 161, 162, 163, 164],
    [161, 162, 163, 164, 165],
    [162, 163, 164, 165, 166],
    [163, 164, 165, 166, 167],
    [164, 165, 166, 167, 168],
    [165, 166, 167, 168, 169],
    [166, 167, 168, 169, 170],
    [167, 168, 169, 170, 171],
    [168, 169, 170, 171, 172],
    [169, 170, 171, 172, 173],
    [170, 171, 172, 173, 174],
    [171, 172, 173, 174, 175],
    [172, 173, 174, 175, 176],
    [173, 174, 175, 176, 177],
    [174, 175, 176, 177, 178],
    [175, 176, 177, 178, 179],

    [180, 181, 182, 183, 184],
    [181, 182, 183, 184, 185],
    [182, 183, 184, 185, 186],
    [183, 184, 185, 186, 187],
    [184, 185, 186, 187, 188],
    [185, 186, 187, 188, 189],
    [186, 187, 188, 189, 190],
    [187, 188, 189, 190, 191],
    [188, 189, 190, 191, 192],
    [189, 190, 191, 192, 193],
    [190, 191, 192, 193, 194],
    [191, 192, 193, 194, 195],
    [192, 193, 194, 195, 196],
    [193, 194, 195, 196, 197],
    [194, 195, 196, 197, 198],
    [195, 196, 197, 198, 199],

    [200, 201, 202, 203, 204],
    [201, 202, 203, 204, 205],
    [202, 203, 204, 205, 206],
    [203, 204, 205, 206, 207],
    [204, 205, 206, 207, 208],
    [205, 206, 207, 208, 209],
    [206, 207, 208, 209, 210],
    [207, 208, 209, 210, 211],
    [208, 209, 210, 211, 212],
    [209, 210, 211, 212, 213],
    [210, 211, 212, 213, 214],
    [211, 212, 213, 214, 215],
    [212, 213, 214, 215, 216],
    [213, 214, 215, 216, 217],
    [214, 215, 216, 217, 218],
    [215, 216, 217, 218, 219],

    [220, 221, 222, 223, 224],
    [221, 222, 223, 224, 225],
    [222, 223, 224, 225, 226],
    [223, 224, 225, 226, 227],
    [224, 225, 226, 227, 228],
    [225, 226, 227, 228, 229],
    [226, 227, 228, 229, 230],
    [227, 228, 229, 230, 231],
    [228, 229, 230, 231, 232],
    [229, 230, 231, 232, 233],
    [230, 231, 232, 233, 234],
    [231, 232, 233, 234, 235],
    [232, 233, 234, 235, 236],
    [233, 234, 235, 236, 237],
    [234, 235, 236, 237, 238],
    [235, 236, 237, 238, 239],

    [240, 241, 242, 243, 244],
    [241, 242, 243, 244, 245],
    [242, 243, 244, 245, 246],
    [243, 244, 245, 246, 247],
    [244, 245, 246, 247, 248],
    [245, 246, 247, 248, 249],
    [246, 247, 248, 249, 250],
    [247, 248, 249, 250, 251],
    [248, 249, 250, 251, 252],
    [249, 250, 251, 252, 253],
    [250, 251, 252, 253, 254],
    [251, 252, 253, 254, 255],
    [252, 253, 254, 255, 256],
    [253, 254, 255, 256, 257],
    [254, 255, 256, 257, 258],
    [255, 256, 257, 258, 259],

    [260, 261, 262, 263, 264],
    [261, 262, 263, 264, 265],
    [262, 263, 264, 265, 266],
    [263, 264, 265, 266, 267],
    [264, 265, 266, 267, 268],
    [265, 266, 267, 268, 269],
    [266, 267, 268, 269, 270],
    [267, 268, 269, 270, 271],
    [268, 269, 270, 271, 272],
    [269, 270, 271, 272, 273],
    [270, 271, 272, 273, 274],
    [271, 272, 273, 274, 275],
    [272, 273, 274, 275, 276],
    [273, 274, 275, 276, 277],
    [274, 275, 276, 277, 278],
    [275, 276, 277, 278, 279],

    [280, 281, 282, 283, 284],
    [281, 282, 283, 284, 285],
    [282, 283, 284, 285, 286],
    [283, 284, 285, 286, 287],
    [284, 285, 286, 287, 288],
    [285, 286, 287, 288, 289],
    [286, 287, 288, 289, 290],
    [287, 288, 289, 290, 291],
    [288, 289, 290, 291, 292],
    [289, 290, 291, 292, 293],
    [290, 291, 292, 293, 294],
    [291, 292, 293, 294, 295],
    [292, 293, 294, 295, 296],
    [293, 294, 295, 296, 297],
    [294, 295, 296, 297, 298],
    [295, 296, 297, 298, 299],

    [300, 301, 302, 303, 304],
    [301, 302, 303, 304, 305],
    [302, 303, 304, 305, 306],
    [303, 304, 305, 306, 307],
    [304, 305, 306, 307, 308],
    [305, 306, 307, 308, 309],
    [306, 307, 308, 309, 310],
    [307, 308, 309, 310, 311],
    [308, 309, 310, 311, 312],
    [309, 310, 311, 312, 313],
    [310, 311, 312, 313, 314],
    [311, 312, 313, 314, 315],
    [312, 313, 314, 315, 316],
    [313, 314, 315, 316, 317],
    [314, 315, 316, 317, 318],
    [315, 316, 317, 318, 319],

    [320, 321, 322, 323, 324],
    [321, 322, 323, 324, 325],
    [322, 323, 324, 325, 326],
    [323, 324, 325, 326, 327],
    [324, 325, 326, 327, 328],
    [325, 326, 327, 328, 329],
    [326, 327, 328, 329, 330],
    [327, 328, 329, 330, 331],
    [328, 329, 330, 331, 332],
    [329, 330, 331, 332, 333],
    [330, 331, 332, 333, 334],
    [331, 332, 333, 334, 335],
    [332, 333, 334, 335, 336],
    [333, 334, 335, 336, 337],
    [334, 335, 336, 337, 338],
    [335, 336, 337, 338, 339],

    [340, 341, 342, 343, 344],
    [341, 342, 343, 344, 345],
    [342, 343, 344, 345, 346],
    [343, 344, 345, 346, 347],
    [344, 345, 346, 347, 348],
    [345, 346, 347, 348, 349],
    [346, 347, 348, 349, 350],
    [347, 348, 349, 350, 351],
    [348, 349, 350, 351, 352],
    [349, 350, 351, 352, 353],
    [350, 351, 352, 353, 354],
    [351, 352, 353, 354, 355],
    [352, 353, 354, 355, 356],
    [353, 354, 355, 356, 357],
    [354, 355, 356, 357, 358],
    [355, 356, 357, 358, 359],

    [360, 361, 362, 363, 364],
    [361, 362, 363, 364, 365],
    [362, 363, 364, 365, 366],
    [363, 364, 365, 366, 367],
    [364, 365, 366, 367, 368],
    [365, 366, 367, 368, 369],
    [366, 367, 368, 369, 370],
    [367, 368, 369, 370, 371],
    [368, 369, 370, 371, 372],
    [369, 370, 371, 372, 373],
    [370, 371, 372, 373, 374],
    [371, 372, 373, 374, 375],
    [372, 373, 374, 375, 376],
    [373, 374, 375, 376, 377],
    [374, 375, 376, 377, 378],
    [375, 376, 377, 378, 379],

    [380, 381, 382, 383, 384],
    [381, 382, 383, 384, 385],
    [382, 383, 384, 385, 386],
    [383, 384, 385, 386, 387],
    [384, 385, 386, 387, 388],
    [385, 386, 387, 388, 389],
    [386, 387, 388, 389, 390],
    [387, 388, 389, 390, 391],
    [388, 389, 390, 391, 392],
    [389, 390, 391, 392, 393],
    [390, 391, 392, 393, 394],
    [391, 392, 393, 394, 395],
    [392, 393, 394, 395, 396],
    [393, 394, 395, 396, 397],
    [394, 395, 396, 397, 398],
    [395, 396, 397, 398, 399],

    [0, 20, 40, 60, 80],
    [1, 21, 41, 61, 81],
    [2, 22, 42, 62, 82],
    [3, 23, 43, 63, 83],
    [4, 24, 44, 64, 84],
    [5, 25, 45, 65, 85],
    [6, 26, 46, 66, 86],
    [7, 27, 47, 67, 87],
    [8, 28, 48, 68, 88],
    [9, 29, 49, 69, 89],
    [10, 30, 50, 70, 90],
    [11, 31, 51, 71, 91],
    [12, 32, 52, 72, 92],
    [13, 33, 53, 73, 93],
    [14, 34, 54, 74, 94],
    [15, 35, 55, 75, 95],
    [16, 36, 56, 76, 96],
    [17, 37, 57, 77, 97],
    [18, 38, 58, 78, 98],
    [19, 39, 59, 79, 99],
    [20, 40, 60, 80, 100],
    [21, 41, 61, 81, 101],
    [22, 42, 62, 82, 102],
    [23, 43, 63, 83, 103],
    [24, 44, 64, 84, 104],
    [25, 45, 65, 85, 105],
    [26, 46, 66, 86, 106],
    [27, 47, 67, 87, 107],
    [28, 48, 68, 88, 108],
    [29, 49, 69, 89, 109],
    [30, 50, 70, 90, 110],
    [31, 51, 71, 91, 111],
    [32, 52, 72, 92, 112],
    [33, 53, 73, 93, 113],
    [34, 54, 74, 94, 114],
    [35, 55, 75, 95, 115],
    [36, 56, 76, 96, 116],
    [37, 57, 77, 97, 117],
    [38, 58, 78, 98, 118],
    [39, 59, 79, 99, 119],
    [40, 60, 80, 100, 120],
    [41, 61, 81, 101, 121],
    [42, 62, 82, 102, 122],
    [43, 63, 83, 103, 123],
    [44, 64, 84, 104, 124],
    [45, 65, 85, 105, 125],
    [46, 66, 86, 106, 126],
    [47, 67, 87, 107, 127],
    [48, 68, 88, 108, 128],
    [49, 69, 89, 109, 129],
    [50, 70, 90, 110, 130],
    [51, 71, 91, 111, 131],
    [52, 72, 92, 112, 132],
    [53, 73, 93, 113, 133],
    [54, 74, 94, 114, 134],
    [55, 75, 95, 115, 135],
    [56, 76, 96, 116, 136],
    [57, 77, 97, 117, 137],
    [58, 78, 98, 118, 138],
    [59, 79, 99, 119, 139],
    [60, 80, 100, 120, 140],
    [61, 81, 101, 121, 141],
    [62, 82, 102, 122, 142],
    [63, 83, 103, 123, 143],
    [64, 84, 104, 124, 144],
    [65, 85, 105, 125, 145],
    [66, 86, 106, 126, 146],
    [67, 87, 107, 127, 147],
    [68, 88, 108, 128, 148],
    [69, 89, 109, 129, 149],
    [70, 90, 110, 130, 150],
    [71, 91, 111, 131, 151],
    [72, 92, 112, 132, 152],
    [73, 93, 113, 133, 153],
    [74, 94, 114, 134, 154],
    [75, 95, 115, 135, 155],
    [76, 96, 116, 136, 156],
    [77, 97, 117, 137, 157],
    [78, 98, 118, 138, 158],
    [79, 99, 119, 139, 159],
    [80, 100, 120, 140, 160],
    [81, 101, 121, 141, 161],
    [82, 102, 122, 142, 162],
    [83, 103, 123, 143, 163],
    [84, 104, 124, 144, 164],
    [85, 105, 125, 145, 165],
    [86, 106, 126, 146, 166],
    [87, 107, 127, 147, 167],
    [88, 108, 128, 148, 168],
    [89, 109, 129, 149, 169],
    [90, 110, 130, 150, 170],
    [91, 111, 131, 151, 171],
    [92, 112, 132, 152, 172],
    [93, 113, 133, 153, 173],
    [94, 114, 134, 154, 174],
    [95, 115, 135, 155, 175],
    [96, 116, 136, 156, 176],
    [97, 117, 137, 157, 177],
    [98, 118, 138, 158, 178],
    [99, 119, 139, 159, 179],
    [100, 120, 140, 160, 180],
    [101, 121, 141, 161, 181],
    [102, 122, 142, 162, 182],
    [103, 123, 143, 163, 183],
    [104, 124, 144, 164, 184],
    [105, 125, 145, 165, 185],
    [106, 126, 146, 166, 186],
    [107, 127, 147, 167, 187],
    [108, 128, 148, 168, 188],
    [109, 129, 149, 169, 189],
    [110, 130, 150, 170, 190],
    [111, 131, 151, 171, 191],
    [112, 132, 152, 172, 192],
    [113, 133, 153, 173, 193],
    [114, 134, 154, 174, 194],
    [115, 135, 155, 175, 195],
    [116, 136, 156, 176, 196],
    [117, 137, 157, 177, 197],
    [118, 138, 158, 178, 198],
    [119, 139, 159, 179, 199],
    [120, 140, 160, 180, 200],
    [121, 141, 161, 181, 201],
    [122, 142, 162, 182, 202],
    [123, 143, 163, 183, 203],
    [124, 144, 164, 184, 204],
    [125, 145, 165, 185, 205],
    [126, 146, 166, 186, 206],
    [127, 147, 167, 187, 207],
    [128, 148, 168, 188, 208],
    [129, 149, 169, 189, 209],
    [130, 150, 170, 190, 210],
    [131, 151, 171, 191, 211],
    [132, 152, 172, 192, 212],
    [133, 153, 173, 193, 213],
    [134, 154, 174, 194, 214],
    [135, 155, 175, 195, 215],
    [136, 156, 176, 196, 216],
    [137, 157, 177, 197, 217],
    [138, 158, 178, 198, 218],
    [139, 159, 179, 199, 219],
    [140, 160, 180, 200, 220],
    [141, 161, 181, 201, 221],
    [142, 162, 182, 202, 222],
    [143, 163, 183, 203, 223],
    [144, 164, 184, 204, 224],
    [145, 165, 185, 205, 225],
    [146, 166, 186, 206, 226],
    [147, 167, 187, 207, 227],
    [148, 168, 188, 208, 228],
    [149, 169, 189, 209, 229],
    [150, 170, 190, 210, 230],
    [151, 171, 191, 211, 231],
    [152, 172, 192, 212, 232],
    [153, 173, 193, 213, 233],
    [154, 174, 194, 214, 234],
    [155, 175, 195, 215, 235],
    [156, 176, 196, 216, 236],
    [157, 177, 197, 217, 237],
    [158, 178, 198, 218, 238],
    [159, 179, 199, 219, 239],
    [160, 180, 200, 220, 240],
    [161, 181, 201, 221, 241],
    [162, 182, 202, 222, 242],
    [163, 183, 203, 223, 243],
    [164, 184, 204, 224, 244],
    [165, 185, 205, 225, 245],
    [166, 186, 206, 226, 246],
    [167, 187, 207, 227, 247],
    [168, 188, 208, 228, 248],
    [169, 189, 209, 229, 249],
    [170, 190, 210, 230, 250],
    [171, 191, 211, 231, 251],
    [172, 192, 212, 232, 252],
    [173, 193, 213, 233, 253],
    [174, 194, 214, 234, 254],
    [175, 195, 215, 235, 255],
    [176, 196, 216, 236, 256],
    [177, 197, 217, 237, 257],
    [178, 198, 218, 238, 258],
    [179, 199, 219, 239, 259],
    [180, 200, 220, 240, 260],
    [181, 201, 221, 241, 261],
    [182, 202, 222, 242, 262],
    [183, 203, 223, 243, 263],
    [184, 204, 224, 244, 264],
    [185, 205, 225, 245, 265],
    [186, 206, 226, 246, 266],
    [187, 207, 227, 247, 267],
    [188, 208, 228, 248, 268],
    [189, 209, 229, 249, 269],
    [190, 210, 230, 250, 270],
    [191, 211, 231, 251, 271],
    [192, 212, 232, 252, 272],
    [193, 213, 233, 253, 273],
    [194, 214, 234, 254, 274],
    [195, 215, 235, 255, 275],
    [196, 216, 236, 256, 276],
    [197, 217, 237, 257, 277],
    [198, 218, 238, 258, 278],
    [199, 219, 239, 259, 279],
    [200, 220, 240, 260, 280],
    [201, 221, 241, 261, 281],
    [202, 222, 242, 262, 282],
    [203, 223, 243, 263, 283],
    [204, 224, 244, 264, 284],
    [205, 225, 245, 265, 285],
    [206, 226, 246, 266, 286],
    [207, 227, 247, 267, 287],
    [208, 228, 248, 268, 288],
    [209, 229, 249, 269, 289],
    [210, 230, 250, 270, 290],
    [211, 231, 251, 271, 291],
    [212, 232, 252, 272, 292],
    [213, 233, 253, 273, 293],
    [214, 234, 254, 274, 294],
    [215, 235, 255, 275, 295],
    [216, 236, 256, 276, 296],
    [217, 237, 257, 277, 297],
    [218, 238, 258, 278, 298],
    [219, 239, 259, 279, 299],
    [220, 240, 260, 280, 300],
    [221, 241, 261, 281, 301],
    [222, 242, 262, 282, 302],
    [223, 243, 263, 283, 303],
    [224, 244, 264, 284, 304],
    [225, 245, 265, 285, 305],
    [226, 246, 266, 286, 306],
    [227, 247, 267, 287, 307],
    [228, 248, 268, 288, 308],
    [229, 249, 269, 289, 309],
    [230, 250, 270, 290, 310],
    [231, 251, 271, 291, 311],
    [232, 252, 272, 292, 312],
    [233, 253, 273, 293, 313],
    [234, 254, 274, 294, 314],
    [235, 255, 275, 295, 315],
    [236, 256, 276, 296, 316],
    [237, 257, 277, 297, 317],
    [238, 258, 278, 298, 318],
    [239, 259, 279, 299, 319],
    [240, 260, 280, 300, 320],
    [241, 261, 281, 301, 321],
    [242, 262, 282, 302, 322],
    [243, 263, 283, 303, 323],
    [244, 264, 284, 304, 324],
    [245, 265, 285, 305, 325],
    [246, 266, 286, 306, 326],
    [247, 267, 287, 307, 327],
    [248, 268, 288, 308, 328],
    [249, 269, 289, 309, 329],
    [250, 270, 290, 310, 330],
    [251, 271, 291, 311, 331],
    [252, 272, 292, 312, 332],
    [253, 273, 293, 313, 333],
    [254, 274, 294, 314, 334],
    [255, 275, 295, 315, 335],
    [256, 276, 296, 316, 336],
    [257, 277, 297, 317, 337],
    [258, 278, 298, 318, 338],
    [259, 279, 299, 319, 339],
    [260, 280, 300, 320, 340],
    [261, 281, 301, 321, 341],
    [262, 282, 302, 322, 342],
    [263, 283, 303, 323, 343],
    [264, 284, 304, 324, 344],
    [265, 285, 305, 325, 345],
    [266, 286, 306, 326, 346],
    [267, 287, 307, 327, 347],
    [268, 288, 308, 328, 348],
    [269, 289, 309, 329, 349],
    [270, 290, 310, 330, 350],
    [271, 291, 311, 331, 351],
    [272, 292, 312, 332, 352],
    [273, 293, 313, 333, 353],
    [274, 294, 314, 334, 354],
    [275, 295, 315, 335, 355],
    [276, 296, 316, 336, 356],
    [277, 297, 317, 337, 357],
    [278, 298, 318, 338, 358],
    [279, 299, 319, 339, 359],
    [280, 300, 320, 340, 360],
    [281, 301, 321, 341, 361],
    [282, 302, 322, 342, 362],
    [283, 303, 323, 343, 363],
    [284, 304, 324, 344, 364],
    [285, 305, 325, 345, 365],
    [286, 306, 326, 346, 366],
    [287, 307, 327, 347, 367],
    [288, 308, 328, 348, 368],
    [289, 309, 329, 349, 369],
    [290, 310, 330, 350, 370],
    [291, 311, 331, 351, 371],
    [292, 312, 332, 352, 372],
    [293, 313, 333, 353, 373],
    [294, 314, 334, 354, 374],
    [295, 315, 335, 355, 375],
    [296, 316, 336, 356, 376],
    [297, 317, 337, 357, 377],
    [298, 318, 338, 358, 378],
    [299, 319, 339, 359, 379],
    [300, 320, 340, 360, 380],
    [301, 321, 341, 361, 381],
    [302, 322, 342, 362, 382],
    [303, 323, 343, 363, 383],
    [304, 324, 344, 364, 384],
    [305, 325, 345, 365, 385],
    [306, 326, 346, 366, 386],
    [307, 327, 347, 367, 387],
    [308, 328, 348, 368, 388],
    [309, 329, 349, 369, 389],
    [310, 330, 350, 370, 390],
    [311, 331, 351, 371, 391],
    [312, 332, 352, 372, 392],
    [313, 333, 353, 373, 393],
    [314, 334, 354, 374, 394],
    [315, 335, 355, 375, 395],
    [316, 336, 356, 376, 396],
    [317, 337, 357, 377, 397],
    [318, 338, 358, 378, 398],
    [319, 339, 359, 379, 399],

    [4, 23, 42, 61, 80],
    [5, 24, 43, 62, 81],
    [6, 25, 44, 63, 82],
    [7, 26, 45, 64, 83],
    [8, 27, 46, 65, 84],
    [9, 28, 47, 66, 85],
    [10, 29, 48, 67, 86],
    [11, 30, 49, 68, 87],
    [12, 31, 50, 69, 88],
    [13, 32, 51, 70, 89],
    [14, 33, 52, 71, 90],
    [15, 34, 53, 72, 91],
    [16, 35, 54, 73, 92],
    [17, 36, 55, 74, 93],
    [18, 37, 56, 75, 94],
    [19, 38, 57, 76, 95],

    [24, 43, 62, 81, 100],
    [25, 44, 63, 82, 101],
    [26, 45, 64, 83, 102],
    [27, 46, 65, 84, 103],
    [28, 47, 66, 85, 104],
    [29, 48, 67, 86, 105],
    [30, 49, 68, 87, 106],
    [31, 50, 69, 88, 107],
    [32, 51, 70, 89, 108],
    [33, 52, 71, 90, 109],
    [34, 53, 72, 91, 110],
    [35, 54, 73, 92, 111],
    [36, 55, 74, 93, 112],
    [37, 56, 75, 94, 113],
    [38, 57, 76, 95, 114],
    [39, 58, 77, 96, 115],

    [44, 63, 82, 101, 120],
    [45, 64, 83, 102, 121],
    [46, 65, 84, 103, 122],
    [47, 66, 85, 104, 123],
    [48, 67, 86, 105, 124],
    [49, 68, 87, 106, 125],
    [50, 69, 88, 107, 126],
    [51, 70, 89, 108, 127],
    [52, 71, 90, 109, 128],
    [53, 72, 91, 110, 129],
    [54, 73, 92, 111, 130],
    [55, 74, 93, 112, 131],
    [56, 75, 94, 113, 132],
    [57, 76, 95, 114, 133],
    [58, 77, 96, 115, 134],
    [59, 78, 97, 116, 135],

    [64, 83, 102, 121, 140],
    [65, 84, 103, 122, 141],
    [66, 85, 104, 123, 142],
    [67, 86, 105, 124, 143],
    [68, 87, 106, 125, 144],
    [69, 88, 107, 126, 145],
    [70, 89, 108, 127, 146],
    [71, 90, 109, 128, 147],
    [72, 91, 110, 129, 148],
    [73, 92, 111, 130, 149],
    [74, 93, 112, 131, 150],
    [75, 94, 113, 132, 151],
    [76, 95, 114, 133, 152],
    [77, 96, 115, 134, 153],
    [78, 97, 116, 135, 154],
    [79, 98, 117, 136, 155],

    [84, 103, 122, 141, 160],
    [85, 104, 123, 142, 161],
    [86, 105, 124, 143, 162],
    [87, 106, 125, 144, 163],
    [88, 107, 126, 145, 164],
    [89, 108, 127, 146, 165],
    [90, 109, 128, 147, 166],
    [91, 110, 129, 148, 167],
    [92, 111, 130, 149, 168],
    [93, 112, 131, 150, 169],
    [94, 113, 132, 151, 170],
    [95, 114, 133, 152, 171],
    [96, 115, 134, 153, 172],
    [97, 116, 135, 154, 173],
    [98, 117, 136, 155, 174],
    [99, 118, 137, 156, 175],

    [104, 123, 142, 161, 180],
    [105, 124, 143, 162, 181],
    [106, 125, 144, 163, 182],
    [107, 126, 145, 164, 183],
    [108, 127, 146, 165, 184],
    [109, 128, 147, 166, 185],
    [110, 129, 148, 167, 186],
    [111, 130, 149, 168, 187],
    [112, 131, 150, 169, 188],
    [113, 132, 151, 170, 189],
    [114, 133, 152, 171, 190],
    [115, 134, 153, 172, 191],
    [116, 135, 154, 173, 192],
    [117, 136, 155, 174, 193],
    [118, 137, 156, 175, 194],
    [119, 138, 157, 176, 195],

    [124, 143, 162, 181, 200],
    [125, 144, 163, 182, 201],
    [126, 145, 164, 183, 202],
    [127, 146, 165, 184, 203],
    [128, 147, 166, 185, 204],
    [129, 148, 167, 186, 205],
    [130, 149, 168, 187, 206],
    [131, 150, 169, 188, 207],
    [132, 151, 170, 189, 208],
    [133, 152, 171, 190, 209],
    [134, 153, 172, 191, 210],
    [135, 154, 173, 192, 211],
    [136, 155, 174, 193, 212],
    [137, 156, 175, 194, 213],
    [138, 157, 176, 195, 214],
    [139, 158, 177, 196, 215],

    [144, 163, 182, 201, 220],
    [145, 164, 183, 202, 221],
    [146, 165, 184, 203, 222],
    [147, 166, 185, 204, 223],
    [148, 167, 186, 205, 224],
    [149, 168, 187, 206, 225],
    [150, 169, 188, 207, 226],
    [151, 170, 189, 208, 227],
    [152, 171, 190, 209, 228],
    [153, 172, 191, 210, 229],
    [154, 173, 192, 211, 230],
    [155, 174, 193, 212, 231],
    [156, 175, 194, 213, 232],
    [157, 176, 195, 214, 233],
    [158, 177, 196, 215, 234],
    [159, 178, 197, 216, 235],

    [164, 183, 202, 221, 240],
    [165, 184, 203, 222, 241],
    [166, 185, 204, 223, 242],
    [167, 186, 205, 224, 243],
    [168, 187, 206, 225, 244],
    [169, 188, 207, 226, 245],
    [170, 189, 208, 227, 246],
    [171, 190, 209, 228, 247],
    [172, 191, 210, 229, 248],
    [173, 192, 211, 230, 249],
    [174, 193, 212, 231, 250],
    [175, 194, 213, 232, 251],
    [176, 195, 214, 233, 252],
    [177, 196, 215, 234, 253],
    [178, 197, 216, 235, 254],
    [179, 198, 217, 236, 255],

    [184, 203, 222, 241, 260],
    [185, 204, 223, 242, 261],
    [186, 205, 224, 243, 262],
    [187, 206, 225, 244, 263],
    [188, 207, 226, 245, 264],
    [189, 208, 227, 246, 265],
    [190, 209, 228, 247, 266],
    [191, 210, 229, 248, 267],
    [192, 211, 230, 249, 268],
    [193, 212, 231, 250, 269],
    [194, 213, 232, 251, 270],
    [195, 214, 233, 252, 271],
    [196, 215, 234, 253, 272],
    [197, 216, 235, 254, 273],
    [198, 217, 236, 255, 274],
    [199, 218, 237, 256, 275],

    [204, 223, 242, 261, 280],
    [205, 224, 243, 262, 281],
    [206, 225, 244, 263, 282],
    [207, 226, 245, 264, 283],
    [208, 227, 246, 265, 284],
    [209, 228, 247, 266, 285],
    [210, 229, 248, 267, 286],
    [211, 230, 249, 268, 287],
    [212, 231, 250, 269, 288],
    [213, 232, 251, 270, 289],
    [214, 233, 252, 271, 290],
    [215, 234, 253, 272, 291],
    [216, 235, 254, 273, 292],
    [217, 236, 255, 274, 293],
    [218, 237, 256, 275, 294],
    [219, 238, 257, 276, 295],

    [224, 243, 262, 281, 300],
    [225, 244, 263, 282, 301],
    [226, 245, 264, 283, 302],
    [227, 246, 265, 284, 303],
    [228, 247, 266, 285, 304],
    [229, 248, 267, 286, 305],
    [230, 249, 268, 287, 306],
    [231, 250, 269, 288, 307],
    [232, 251, 270, 289, 308],
    [233, 252, 271, 290, 309],
    [234, 253, 272, 291, 310],
    [235, 254, 273, 292, 311],
    [236, 255, 274, 293, 312],
    [237, 256, 275, 294, 313],
    [238, 257, 276, 295, 314],
    [239, 258, 277, 296, 315],

    [244, 263, 282, 301, 320],
    [245, 264, 283, 302, 321],
    [246, 265, 284, 303, 322],
    [247, 266, 285, 304, 323],
    [248, 267, 286, 305, 324],
    [249, 268, 287, 306, 325],
    [250, 269, 288, 307, 326],
    [251, 270, 289, 308, 327],
    [252, 271, 290, 309, 328],
    [253, 272, 291, 310, 329],
    [254, 273, 292, 311, 330],
    [255, 274, 293, 312, 331],
    [256, 275, 294, 313, 332],
    [257, 276, 295, 314, 333],
    [258, 277, 296, 315, 334],
    [259, 278, 297, 316, 335],

    [264, 283, 302, 321, 340],
    [265, 284, 303, 322, 341],
    [266, 285, 304, 323, 342],
    [267, 286, 305, 324, 343],
    [268, 287, 306, 325, 344],
    [269, 288, 307, 326, 345],
    [270, 289, 308, 327, 346],
    [271, 290, 309, 328, 347],
    [272, 291, 310, 329, 348],
    [273, 292, 311, 330, 349],
    [274, 293, 312, 331, 350],
    [275, 294, 313, 332, 351],
    [276, 295, 314, 333, 352],
    [277, 296, 315, 334, 353],
    [278, 297, 316, 335, 354],
    [279, 298, 317, 336, 355],

    [284, 303, 322, 341, 360],
    [285, 304, 323, 342, 361],
    [286, 305, 324, 343, 362],
    [287, 306, 325, 344, 363],
    [288, 307, 326, 345, 364],
    [289, 308, 327, 346, 365],
    [290, 309, 328, 347, 366],
    [291, 310, 329, 348, 367],
    [292, 311, 330, 349, 368],
    [293, 312, 331, 350, 369],
    [294, 313, 332, 351, 370],
    [295, 314, 333, 352, 371],
    [296, 315, 334, 353, 372],
    [297, 316, 335, 354, 373],
    [298, 317, 336, 355, 374],
    [299, 318, 337, 356, 375],

    [304, 323, 342, 361, 380],
    [305, 324, 343, 362, 381],
    [306, 325, 344, 363, 382],
    [307, 326, 345, 364, 383],
    [308, 327, 346, 365, 384],
    [309, 328, 347, 366, 385],
    [310, 329, 348, 367, 386],
    [311, 330, 349, 368, 387],
    [312, 331, 350, 369, 388],
    [313, 332, 351, 370, 389],
    [314, 333, 352, 371, 390],
    [315, 334, 353, 372, 391],
    [316, 335, 354, 373, 392],
    [317, 336, 355, 374, 393],
    [318, 337, 356, 375, 394],
    [319, 338, 357, 376, 395],

    [0, 21, 42, 63, 84],
    [1, 22, 43, 64, 85],
    [2, 23, 44, 65, 86],
    [3, 24, 45, 66, 87],
    [4, 25, 46, 67, 88],
    [5, 26, 47, 68, 89],
    [6, 27, 48, 69, 90],
    [7, 28, 49, 70, 91],
    [8, 29, 50, 71, 92],
    [9, 30, 51, 72, 93],
    [10, 31, 52, 73, 94],
    [11, 32, 53, 74, 95],
    [12, 33, 54, 75, 96],
    [13, 34, 55, 76, 97],
    [14, 35, 56, 77, 98],
    [15, 36, 57, 78, 99],

    [20, 41, 62, 83, 104],
    [21, 42, 63, 84, 105],
    [22, 43, 64, 85, 106],
    [23, 44, 65, 86, 107],
    [24, 45, 66, 87, 108],
    [25, 46, 67, 88, 109],
    [26, 47, 68, 89, 110],
    [27, 48, 69, 90, 111],
    [28, 49, 70, 91, 112],
    [29, 50, 71, 92, 113],
    [30, 51, 72, 93, 114],
    [31, 52, 73, 94, 115],
    [32, 53, 74, 95, 116],
    [33, 54, 75, 96, 117],
    [34, 55, 76, 97, 118],
    [35, 56, 77, 98, 119],

    [40, 61, 82, 103, 124],
    [41, 62, 83, 104, 125],
    [42, 63, 84, 105, 126],
    [43, 64, 85, 106, 127],
    [44, 65, 86, 107, 128],
    [45, 66, 87, 108, 129],
    [46, 67, 88, 109, 130],
    [47, 68, 89, 110, 131],
    [48, 69, 90, 111, 132],
    [49, 70, 91, 112, 133],
    [50, 71, 92, 113, 134],
    [51, 72, 93, 114, 135],
    [52, 73, 94, 115, 136],
    [53, 74, 95, 116, 137],
    [54, 75, 96, 117, 138],
    [55, 76, 97, 118, 139],

    [60, 81, 102, 123, 144],
    [61, 82, 103, 124, 145],
    [62, 83, 104, 125, 146],
    [63, 84, 105, 126, 147],
    [64, 85, 106, 127, 148],
    [65, 86, 107, 128, 149],
    [66, 87, 108, 129, 150],
    [67, 88, 109, 130, 151],
    [68, 89, 110, 131, 152],
    [69, 90, 111, 132, 153],
    [70, 91, 112, 133, 154],
    [71, 92, 113, 134, 155],
    [72, 93, 114, 135, 156],
    [73, 94, 115, 136, 157],
    [74, 95, 116, 137, 158],
    [75, 96, 117, 138, 159],

    [80, 101, 122, 143, 164],
    [81, 102, 123, 144, 165],
    [82, 103, 124, 145, 166],
    [83, 104, 125, 146, 167],
    [84, 105, 126, 147, 168],
    [85, 106, 127, 148, 169],
    [86, 107, 128, 149, 170],
    [87, 108, 129, 150, 171],
    [88, 109, 130, 151, 172],
    [89, 110, 131, 152, 173],
    [90, 111, 132, 153, 174],
    [91, 112, 133, 154, 175],
    [92, 113, 134, 155, 176],
    [93, 114, 135, 156, 177],
    [94, 115, 136, 157, 178],
    [95, 116, 137, 158, 179],

    [100, 121, 142, 163, 184],
    [101, 122, 143, 164, 185],
    [102, 123, 144, 165, 186],
    [103, 124, 145, 166, 187],
    [104, 125, 146, 167, 188],
    [105, 126, 147, 168, 189],
    [106, 127, 148, 169, 190],
    [107, 128, 149, 170, 191],
    [108, 129, 150, 171, 192],
    [109, 130, 151, 172, 193],
    [110, 131, 152, 173, 194],
    [111, 132, 153, 174, 195],
    [112, 133, 154, 175, 196],
    [113, 134, 155, 176, 197],
    [114, 135, 156, 177, 198],
    [115, 136, 157, 178, 199],

    [120, 141, 162, 183, 204],
    [121, 142, 163, 184, 205],
    [122, 143, 164, 185, 206],
    [123, 144, 165, 186, 207],
    [124, 145, 166, 187, 208],
    [125, 146, 167, 188, 209],
    [126, 147, 168, 189, 210],
    [127, 148, 169, 190, 211],
    [128, 149, 170, 191, 212],
    [129, 150, 171, 192, 213],
    [130, 151, 172, 193, 214],
    [131, 152, 173, 194, 215],
    [132, 153, 174, 195, 216],
    [133, 154, 175, 196, 217],
    [134, 155, 176, 197, 218],
    [135, 156, 177, 198, 219],

    [140, 161, 182, 203, 224],
    [141, 162, 183, 204, 225],
    [142, 163, 184, 205, 226],
    [143, 164, 185, 206, 227],
    [144, 165, 186, 207, 228],
    [145, 166, 187, 208, 229],
    [146, 167, 188, 209, 230],
    [147, 168, 189, 210, 231],
    [148, 169, 190, 211, 232],
    [149, 170, 191, 212, 233],
    [150, 171, 192, 213, 234],
    [151, 172, 193, 214, 235],
    [152, 173, 194, 215, 236],
    [153, 174, 195, 216, 237],
    [154, 175, 196, 217, 238],
    [155, 176, 197, 218, 239],

    [160, 181, 202, 223, 244],
    [161, 182, 203, 224, 245],
    [162, 183, 204, 225, 246],
    [163, 184, 205, 226, 247],
    [164, 185, 206, 227, 248],
    [165, 186, 207, 228, 249],
    [166, 187, 208, 229, 250],
    [167, 188, 209, 230, 251],
    [168, 189, 210, 231, 252],
    [169, 190, 211, 232, 253],
    [170, 191, 212, 233, 254],
    [171, 192, 213, 234, 255],
    [172, 193, 214, 235, 256],
    [173, 194, 215, 236, 257],
    [174, 195, 216, 237, 258],
    [175, 196, 217, 238, 259],

    [180, 201, 222, 243, 264],
    [181, 202, 223, 244, 265],
    [182, 203, 224, 245, 266],
    [183, 204, 225, 246, 267],
    [184, 205, 226, 247, 268],
    [185, 206, 227, 248, 269],
    [186, 207, 228, 249, 270],
    [187, 208, 229, 250, 271],
    [188, 209, 230, 251, 272],
    [189, 210, 231, 252, 273],
    [190, 211, 232, 253, 274],
    [191, 212, 233, 254, 275],
    [192, 213, 234, 255, 276],
    [193, 214, 235, 256, 277],
    [194, 215, 236, 257, 278],
    [195, 216, 237, 258, 279],

    [200, 221, 242, 263, 284],
    [201, 222, 243, 264, 285],
    [202, 223, 244, 265, 286],
    [203, 224, 245, 266, 287],
    [204, 225, 246, 267, 288],
    [205, 226, 247, 268, 289],
    [206, 227, 248, 269, 290],
    [207, 228, 249, 270, 291],
    [208, 229, 250, 271, 292],
    [209, 230, 251, 272, 293],
    [210, 231, 252, 273, 294],
    [211, 232, 253, 274, 295],
    [212, 233, 254, 275, 296],
    [213, 234, 255, 276, 297],
    [214, 235, 256, 277, 298],
    [215, 236, 257, 278, 299],

    [220, 241, 262, 283, 304],
    [221, 242, 263, 284, 305],
    [222, 243, 264, 285, 306],
    [223, 244, 265, 286, 307],
    [224, 245, 266, 287, 308],
    [225, 246, 267, 288, 309],
    [226, 247, 268, 289, 310],
    [227, 248, 269, 290, 311],
    [228, 249, 270, 291, 312],
    [229, 250, 271, 292, 313],
    [230, 251, 272, 293, 314],
    [231, 252, 273, 294, 315],
    [232, 253, 274, 295, 316],
    [233, 254, 275, 296, 317],
    [234, 255, 276, 297, 318],
    [235, 256, 277, 298, 319],

    [240, 261, 282, 303, 324],
    [241, 262, 283, 304, 325],
    [242, 263, 284, 305, 326],
    [243, 264, 285, 306, 327],
    [244, 265, 286, 307, 328],
    [245, 266, 287, 308, 329],
    [246, 267, 288, 309, 330],
    [247, 268, 289, 310, 331],
    [248, 269, 290, 311, 332],
    [249, 270, 291, 312, 333],
    [250, 271, 292, 313, 334],
    [251, 272, 293, 314, 335],
    [252, 273, 294, 315, 336],
    [253, 274, 295, 316, 337],
    [254, 275, 296, 317, 338],
    [255, 276, 297, 318, 339],

    [260, 281, 302, 323, 344],
    [261, 282, 303, 324, 345],
    [262, 283, 304, 325, 346],
    [263, 284, 305, 326, 347],
    [264, 285, 306, 327, 348],
    [265, 286, 307, 328, 349],
    [266, 287, 308, 329, 350],
    [267, 288, 309, 330, 351],
    [268, 289, 310, 331, 352],
    [269, 290, 311, 332, 353],
    [270, 291, 312, 333, 354],
    [271, 292, 313, 334, 355],
    [272, 293, 314, 335, 356],
    [273, 294, 315, 336, 357],
    [274, 295, 316, 337, 358],
    [275, 296, 317, 338, 359],

    [280, 301, 322, 343, 364],
    [281, 302, 323, 344, 365],
    [282, 303, 324, 345, 366],
    [283, 304, 325, 346, 367],
    [284, 305, 326, 347, 368],
    [285, 306, 327, 348, 369],
    [286, 307, 328, 349, 370],
    [287, 308, 329, 350, 371],
    [288, 309, 330, 351, 372],
    [289, 310, 331, 352, 373],
    [290, 311, 332, 353, 374],
    [291, 312, 333, 354, 375],
    [292, 313, 334, 355, 376],
    [293, 314, 335, 356, 377],
    [294, 315, 336, 357, 378],
    [295, 316, 337, 358, 379],

    [300, 321, 342, 363, 384],
    [301, 322, 343, 364, 385],
    [302, 323, 344, 365, 386],
    [303, 324, 345, 366, 387],
    [304, 325, 346, 367, 388],
    [305, 326, 347, 368, 389],
    [306, 327, 348, 369, 390],
    [307, 328, 349, 370, 391],
    [308, 329, 350, 371, 392],
    [309, 330, 351, 372, 393],
    [310, 331, 352, 373, 394],
    [311, 332, 353, 374, 395],
    [312, 333, 354, 375, 396],
    [313, 334, 355, 376, 397],
    [314, 335, 356, 377, 398],
    [315, 336, 357, 378, 399]
  ];
  for (let i = 0; i < possibleStreaks.length; i += 1) {
    const [a, b, c, d, e] = possibleStreaks[i];
    if (
      squares[a] &&
      squares[a] === squares[b] &&
      squares[a] === squares[c] &&
      squares[a] === squares[d] &&
      squares[a] === squares[e]
    ) {
      return {
        player: squares[a],
        line: [a, b, c, d, e]
      };
    }
  }
  return null;
}

class Game extends React.Component {
  playerMove(i) {
    const { history, stepNumber, xIsNext, playerMove } = this.props;
    const historys = history.slice(0, stepNumber + 1);
    const current = historys[historys.length - 1];
    const squares = current.squares.slice();

    if (indicateVictory(squares) || squares[i]) {
      return;
    }
    squares[i] = xIsNext ? 'X' : 'O';
    playerMove(historys, squares);
  }

  timeTravel(step) {
    const { timeTravel } = this.props;
    timeTravel(step);
  }

  sortHistory() {
    const { isDescending, sortHistory } = this.props;
    sortHistory(isDescending);
  }

  componentWillMount() {
    const {
      xIsNext,
      gameSettings,
      stepNumber,
      grid,
      currentBoard
    } = this.props;
    const { playerStarts, versus, difficulty } = gameSettings;

    const board = currentBoard.slice();
    if (stepNumber === 0) {
      if (!playerStarts && xIsNext && versus === 'A') {
        const bestMove = getBestMove(board, grid, xIsNext);
        const move = aiMove(bestMove, board, difficulty);
        setTimeout(() => {
          this.playerMove(move);
        }, 750);
      }
    }
  }

  componentWillReceiveProps(nextProps) {
    const { xIsNext, grid } = this.props;
    const { playerStarts, versus, difficulty } = nextProps.gameSettings;

    const board = nextProps.currentBoard.slice();

    if (nextProps.stepNumber || nextProps.stepNumber === 0) {
      if (!playerStarts && xIsNext && versus === 'A') {
        // if AI plays first (X)
        const bestMove = getBestMove(board, grid, xIsNext);
        const move = aiMove(bestMove, board, difficulty);
        // AI will make his move based on the difficulty level.
        setTimeout(() => {
          this.playerMove(move);
        }, 750);
      }
      if (playerStarts && !xIsNext && versus === 'A') {
        // if AI plays second (O)
        const bestMove = getBestMove(board, grid, xIsNext);
        const move = aiMove(bestMove, board, difficulty);
        setTimeout(() => {
          this.playerMove(move);
        }, 750);
      }
    }
  }

  render() {
    const { history, stepNumber, xIsNext, isDescending } = this.props;
    const current = history[stepNumber];
    const winner = indicateVictory(current.squares);

    const moves = history.map((step, move) => {
      const desc = move ? `Go to move #${move}` : 'NEW GAME';
      return (
        <li key={move}>
          <button type="button" onClick={() => this.timeTravel(move)}>
            {move === stepNumber ? <b>{desc}</b> : desc}
          </button>
        </li>
      );
    });

    let status;
    if (winner) {
      status = `Winner:${winner.player}`;
    } else {
      status = `Next player: ${xIsNext ? 'X' : 'O'}`;
    }
    const { newGame, grid } = this.props;
    return (
      <div className="game">
        <div className="game-info">
          <Link to="/menu">
            <button type="button" className="exit_game">
              Main Menu
            </button>
          </Link>
          <button
            type="button"
            onClick={() => newGame(grid)}
            className="exit_game"
          >
            Reset
          </button>
        </div>
        <div className="game-info"> </div>
        <div className="game-board">
          <Board
            winner={winner && winner.line}
            squares={current.squares}
            onClick={i => this.playerMove(i)}
          />
        </div>
        <div className="game-info">
          <div>{status}</div>
          <ol>{isDescending ? moves : moves.reverse()}</ol>
          <button type="button" onClick={() => this.sortHistory()}>
            Sort By: {isDescending ? 'Descending' : 'Ascending'}
          </button>
        </div>
      </div>
    );
  }
}

const mapStateToProps = state => ({
  gameSettings: state.settings,
  history: state.game.history,
  currentBoard: state.game.currentBoard,
  xIsNext: state.game.xIsNext,
  isDescending: state.game.isDescending,
  stepNumber: state.game.stepNumber
});

const matchDispatchToProps = dispatch => ({
  playerMove: (history, squares) => dispatch(playerMove(history, squares)),
  sortHistory: isDescending => dispatch(sortHistory(isDescending)),
  timeTravel: step => dispatch(timeTravel(step)),
  newGame: () => dispatch(newGame())
});

export default withRouter(
  connect(
    mapStateToProps,
    matchDispatchToProps
  )(Game)
);
